#+TITLE: 3D BAG
#+AUTHOR: Wouter Beek

* Installation

#+BEGIN_SRC sh
$ sudo dnf install gdal-devel # RedHat, Fedora
$ make
#+END_SRC

* Usage
** drivers

#+BEGIN_SRC sh
$ ./drivers
#+END_SRC

** gml2rdf

#+BEGIN_SRC sh
$ ./gml2rdf input.gml output.ttl
#+END_SRC

*** Example

From:

#+BEGIN_SRC xml
<?xml version="1.0" encoding="utf-8"?>
<CityModel xmlns="http://www.opengis.net/citygml/2.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:xAL="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0"
           xmlns:xlink="http://www.w3.org/1999/xlink"
           xmlns:gml="http://www.opengis.net/gml"
           xmlns:bui="http://www.opengis.net/citygml/building/2.0"
           xmlns:wtr="http://www.opengis.net/citygml/waterbody/2.0"
           xmlns:veg="http://www.opengis.net/citygml/vegetation/2.0"
           xmlns:dem="http://www.opengis.net/citygml/relief/2.0"
           xmlns:tra="http://www.opengis.net/citygml/transportation/2.0"
           xmlns:lu="http://www.opengis.net/citygml/landuse/2.0"
           xmlns:gen="http://www.opengis.net/citygml/generics/2.0"
           xmlns:bri="http://www.opengis.net/citygml/bridge/2.0"
           xmlns:app="http://www.opengis.net/citygml/appearance/2.0"
           xmlns:tun="http://www.opengis.net/citygml/tunnel/2.0"
           xmlns:cif="http://www.opengis.net/citygml/cityfurniture/2.0"
           xsi:schemaLocation="http://www.opengis.net/citygml/2.0 ./CityGML_2.0/CityGML.xsd">
  <!-- Automatically generated by 3dfier (https://github.com/tudelft3d/3dfier) -->
  <gml:name>my 3dfied map</gml:name>
  <gml:boundedBy>
    <gml:Envelope srsDimension="3" srsName="urn:ogc:def:crs:EPSG::7415">
      <gml:lowerCorner>200763.361 502435.953 0</gml:lowerCorner>
      <gml:upperCorner>202249.400 503816.070 100</gml:upperCorner>
    </gml:Envelope>
  </gml:boundedBy>
  <cityObjectMember>
    <bui:Building gml:id="0193100000000016">
      <gen:stringAttribute name="documentdatum">
        <gen:value>20020611</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="objectid">
        <gen:value>1140035</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="aanduidingrecordinactief">
        <gen:value>0</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="identificatie">
        <gen:value>0193100000000016</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="pandstatus">
        <gen:value>Pand in gebruik</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="aanduidingrecordcorrectie">
        <gen:value>0</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="inonderzoek">
        <gen:value>0</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="officieel">
        <gen:value>
        </gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="documentnummer">
        <gen:value>023000187</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="bouwjaar">
        <gen:value>2003</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="begindatumtijdvakgeldigheid">
        <gen:value>20020611</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="einddatumtijdvakgeldigheid">
        <gen:value>21991231</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="shape_length">
        <gen:value>213.21171359082436</gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="_predicate">
        <gen:value>
        </gen:value>
      </gen:stringAttribute>
      <gen:stringAttribute name="shape_area">
        <gen:value>1788.0718344922605</gen:value>
      </gen:stringAttribute>
      <gen:measureAttribute name="min height surface">
        <gen:value uom="#m">1.700</gen:value>
      </gen:measureAttribute>
      <bui:measuredHeight uom="#m">14.890</bui:measuredHeight>
      <bui:lod0FootPrint>
        <gml:MultiSurface>
          <gml:surfaceMember>
            <gml:Polygon>
              <gml:exterior>
                <gml:LinearRing>
                  <gml:posList>201129.665 503386.548 1.700 201145.232 503370.888 1.700 201158.144 503383.724 1.700 201126.362 503415.696 1.700 201105.054 503394.633 1.700 201100.733 503390.341 1.700 201099.641 503391.441 1.700 201096.800 503388.619 1.700 201097.899 503387.546 1.700 201083.787 503373.447 1.700 201100.011 503357.150 1.700 201121.263 503378.353 1.700 201129.665 503386.548 1.700</gml:posList>
                </gml:LinearRing>
              </gml:exterior>
            </gml:Polygon>
          </gml:surfaceMember>
        </gml:MultiSurface>
      </bui:lod0FootPrint>
      <bui:lod0RoofEdge>
        <gml:MultiSurface>
          <gml:surfaceMember>
            <gml:Polygon>
              <gml:exterior>
                <gml:LinearRing>
                  <gml:posList>201129.665 503386.548 14.890 201145.232 503370.888 14.890 201158.144 503383.724 14.890 201126.362 503415.696 14.890 201105.054 503394.633 14.890 201100.733 503390.341 14.890 201099.641 503391.441 14.890 201096.800 503388.619 14.890 201097.899 503387.546 14.890 201083.787 503373.447 14.890 201100.011 503357.150 14.890 201121.263 503378.353 14.890 201129.665 503386.548 14.890</gml:posList>
                </gml:LinearRing>
              </gml:exterior>
            </gml:Polygon>
          </gml:surfaceMember>
        </gml:MultiSurface>
      </bui:lod0RoofEdge>
      <bui:lod1Solid>
        <gml:Solid srsDimension="3">
          <gml:exterior>
            <gml:CompositeSurface>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201121.263 503378.353 1.700 201100.011 503357.150 1.700 201083.787 503373.447 1.700 201097.899 503387.546 1.700 201096.800 503388.619 1.700 201099.641 503391.441 1.700 201100.733 503390.341 1.700 201105.054 503394.633 1.700 201126.362 503415.696 1.700 201158.144 503383.724 1.700 201145.232 503370.888 1.700 201129.665 503386.548 1.700 201121.263 503378.353 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201129.665 503386.548 14.890 201145.232 503370.888 14.890 201158.144 503383.724 14.890 201126.362 503415.696 14.890 201105.054 503394.633 14.890 201100.733 503390.341 14.890 201099.641 503391.441 14.890 201096.800 503388.619 14.890 201097.899 503387.546 14.890 201083.787 503373.447 14.890 201100.011 503357.150 14.890 201121.263 503378.353 14.890 201129.665 503386.548 14.890</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201100.011 503357.150 1.700 201121.263 503378.353 1.700 201121.263 503378.353 14.890 201100.011 503357.150 14.890 201100.011 503357.150 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201083.787 503373.447 1.700 201100.011 503357.150 1.700 201100.011 503357.150 14.890 201083.787 503373.447 14.890 201083.787 503373.447 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201097.899 503387.546 1.700 201083.787 503373.447 1.700 201083.787 503373.447 14.890 201097.899 503387.546 14.890 201097.899 503387.546 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201096.800 503388.619 1.700 201097.899 503387.546 1.700 201097.899 503387.546 14.890 201096.800 503388.619 14.890 201096.800 503388.619 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201099.641 503391.441 1.700 201096.800 503388.619 1.700 201096.800 503388.619 14.890 201099.641 503391.441 14.890 201099.641 503391.441 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201100.733 503390.341 1.700 201099.641 503391.441 1.700 201099.641 503391.441 14.890 201100.733 503390.341 14.890 201100.733 503390.341 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201105.054 503394.633 1.700 201100.733 503390.341 1.700 201100.733 503390.341 14.890 201105.054 503394.633 14.890 201105.054 503394.633 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201126.362 503415.696 1.700 201105.054 503394.633 1.700 201105.054 503394.633 14.890 201126.362 503415.696 14.890 201126.362 503415.696 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201158.144 503383.724 1.700 201126.362 503415.696 1.700 201126.362 503415.696 14.890 201158.144 503383.724 14.890 201158.144 503383.724 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201145.232 503370.888 1.700 201158.144 503383.724 1.700 201158.144 503383.724 14.890 201145.232 503370.888 14.890 201145.232 503370.888 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201129.665 503386.548 1.700 201145.232 503370.888 1.700 201145.232 503370.888 14.890 201129.665 503386.548 14.890 201129.665 503386.548 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
              <gml:surfaceMember>
                <gml:Polygon>
                  <gml:exterior>
                    <gml:LinearRing>
                      <gml:posList>201121.263 503378.353 1.700 201129.665 503386.548 1.700 201129.665 503386.548 14.890 201121.263 503378.353 14.890 201121.263 503378.353 1.700</gml:posList>
                    </gml:LinearRing>
                  </gml:exterior>
                </gml:Polygon>
              </gml:surfaceMember>
            </gml:CompositeSurface>
          </gml:exterior>
        </gml:Solid>
      </bui:lod1Solid>
    </bui:Building>
  </cityObjectMember>
</CityModel>
#+END_SRC

To:

#+BEGIN_SRC ttl
prefix geo: <http://www.opengis.net/ont/geosparql#>
prefix def: <https://data.labs.pdok.nl/bag/def/>
prefix pand: <http://bag.basisregistraties.overheid.nl/bag/id/pand/>

pand:0193100000000016
  geo:hasGeometry [
    def:crs <http://www.opengis.net/def/crs/EPSG/0/28992>;
    geo:asGML "<gml:MultiPolygon srsName=\"EPSG:28992\"><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201121.263,503378.353,1.7 201100.011,503357.15,1.7 201083.787,503373.447,1.7 201097.899,503387.546,1.7 201096.8,503388.619,1.7 201099.641,503391.441,1.7 201100.733,503390.341,1.7 201105.054,503394.633,1.7 201126.362,503415.696,1.7 201158.144,503383.724,1.7 201145.232,503370.888,1.7 201129.665,503386.548,1.7 201121.263,503378.353,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201129.665,503386.548,14.89 201145.232,503370.888,14.89 201158.144,503383.724,14.89 201126.362,503415.696,14.89 201105.054,503394.633,14.89 201100.733,503390.341,14.89 201099.641,503391.441,14.89 201096.8,503388.619,14.89 201097.899,503387.546,14.89 201083.787,503373.447,14.89 201100.011,503357.15,14.89 201121.263,503378.353,14.89 201129.665,503386.548,14.89</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201100.011,503357.15,1.7 201121.263,503378.353,1.7 201121.263,503378.353,14.89 201100.011,503357.15,14.89 201100.011,503357.15,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201083.787,503373.447,1.7 201100.011,503357.15,1.7 201100.011,503357.15,14.89 201083.787,503373.447,14.89 201083.787,503373.447,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201097.899,503387.546,1.7 201083.787,503373.447,1.7 201083.787,503373.447,14.89 201097.899,503387.546,14.89 201097.899,503387.546,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201096.8,503388.619,1.7 201097.899,503387.546,1.7 201097.899,503387.546,14.89 201096.8,503388.619,14.89 201096.8,503388.619,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201099.641,503391.441,1.7 201096.8,503388.619,1.7 201096.8,503388.619,14.89 201099.641,503391.441,14.89 201099.641,503391.441,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201100.733,503390.341,1.7 201099.641,503391.441,1.7 201099.641,503391.441,14.89 201100.733,503390.341,14.89 201100.733,503390.341,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201105.054,503394.633,1.7 201100.733,503390.341,1.7 201100.733,503390.341,14.89 201105.054,503394.633,14.89 201105.054,503394.633,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201126.362,503415.696,1.7 201105.054,503394.633,1.7 201105.054,503394.633,14.89 201126.362,503415.696,14.89 201126.362,503415.696,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201158.144,503383.724,1.7 201126.362,503415.696,1.7 201126.362,503415.696,14.89 201158.144,503383.724,14.89 201158.144,503383.724,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201145.232,503370.888,1.7 201158.144,503383.724,1.7 201158.144,503383.724,14.89 201145.232,503370.888,14.89 201145.232,503370.888,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201129.665,503386.548,1.7 201145.232,503370.888,1.7 201145.232,503370.888,14.89 201129.665,503386.548,14.89 201129.665,503386.548,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>201121.263,503378.353,1.7 201129.665,503386.548,1.7 201129.665,503386.548,14.89 201121.263,503378.353,14.89 201121.263,503378.353,1.7</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember></gml:MultiPolygon>"^^geo:gmlLiteral;
    geo:asWKT "<http://www.opengis.net/def/crs/EPSG/0/28992> MULTIPOLYGON Z (((201121.263 503378.353 1.7,201100.011 503357.15 1.7,201083.787 503373.447 1.7,201097.899 503387.546 1.7,201096.8 503388.619 1.7,201099.641 503391.441 1.7,201100.733 503390.341 1.7,201105.054 503394.633 1.7,201126.362 503415.696 1.7,201158.144 503383.724 1.7,201145.232 503370.888 1.7,201129.665 503386.548 1.7,201121.263 503378.353 1.7)),((201129.665 503386.548 14.89,201145.232 503370.888 14.89,201158.144 503383.724 14.89,201126.362 503415.696 14.89,201105.054 503394.633 14.89,201100.733 503390.341 14.89,201099.641 503391.441 14.89,201096.8 503388.619 14.89,201097.899 503387.546 14.89,201083.787 503373.447 14.89,201100.011 503357.15 14.89,201121.263 503378.353 14.89,201129.665 503386.548 14.89)),((201100.011 503357.15 1.7,201121.263 503378.353 1.7,201121.263 503378.353 14.89,201100.011 503357.15 14.89,201100.011 503357.15 1.7)),((201083.787 503373.447 1.7,201100.011 503357.15 1.7,201100.011 503357.15 14.89,201083.787 503373.447 14.89,201083.787 503373.447 1.7)),((201097.899 503387.546 1.7,201083.787 503373.447 1.7,201083.787 503373.447 14.89,201097.899 503387.546 14.89,201097.899 503387.546 1.7)),((201096.8 503388.619 1.7,201097.899 503387.546 1.7,201097.899 503387.546 14.89,201096.8 503388.619 14.89,201096.8 503388.619 1.7)),((201099.641 503391.441 1.7,201096.8 503388.619 1.7,201096.8 503388.619 14.89,201099.641 503391.441 14.89,201099.641 503391.441 1.7)),((201100.733 503390.341 1.7,201099.641 503391.441 1.7,201099.641 503391.441 14.89,201100.733 503390.341 14.89,201100.733 503390.341 1.7)),((201105.054 503394.633 1.7,201100.733 503390.341 1.7,201100.733 503390.341 14.89,201105.054 503394.633 14.89,201105.054 503394.633 1.7)),((201126.362 503415.696 1.7,201105.054 503394.633 1.7,201105.054 503394.633 14.89,201126.362 503415.696 14.89,201126.362 503415.696 1.7)),((201158.144 503383.724 1.7,201126.362 503415.696 1.7,201126.362 503415.696 14.89,201158.144 503383.724 14.89,201158.144 503383.724 1.7)),((201145.232 503370.888 1.7,201158.144 503383.724 1.7,201158.144 503383.724 14.89,201145.232 503370.888 14.89,201145.232 503370.888 1.7)),((201129.665 503386.548 1.7,201145.232 503370.888 1.7,201145.232 503370.888 14.89,201129.665 503386.548 14.89,201129.665 503386.548 1.7)),((201121.263 503378.353 1.7,201129.665 503386.548 1.7,201129.665 503386.548 14.89,201121.263 503378.353 14.89,201121.263 503378.353 1.7)))"^^geo:wktLiteral;
    geo:dimension 3 ].
pand:0193100000000016
  geo:hasGeometry [
    def:crs <http://www.opengis.net/def/crs/EPSG/0/4326>;
    geo:asGML "<gml:MultiPolygon srsName=\"EPSG:4326\"><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06666510874161,52.5161310212429,44.3756328029558 6.06634911300593,52.5159422676885,44.3760047396645 6.06611237006041,52.5160900933719,44.3757652267814 6.06632220365507,52.5162156077898,44.3755179373547 6.06630616255536,52.5162253432918,44.3755022129044 6.06634840371996,52.5162504643378,44.3754526926205 6.06636433796865,52.5162404867777,44.375468865037 6.0664285844634,52.51627869351,44.3753935471177 6.06674538852839,52.5164661839594,44.3750237738714 6.06720914783232,52.5161761756369,44.3754937071353 6.06701716392782,52.5160619117673,44.3757189493626 6.06679001276599,52.5162039587503,44.3754887767136 6.06666510874161,52.5161310212429,44.3756328029558</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06679001307215,52.5162039606586,57.5655426084995 6.06701716423405,52.5160619136755,57.5657727783546 6.06720914813861,52.5161761775451,57.5655475379899 6.06674538883454,52.5164661858678,57.5650776010007 6.06642858476945,52.5162786954183,57.5654473761097 6.06636433827468,52.516240488686,57.5655226912349 6.06634840402598,52.5162504662461,57.5655065216124 6.06630616286138,52.5162253452001,57.565556040965 6.06632220396109,52.5162156096981,57.5655717663467 6.06611237036636,52.5160900952801,57.565819057636 6.06634911331195,52.5159422695967,57.5660585686564 6.06666510904773,52.5161310231512,57.5656866338104 6.06679001307215,52.5162039606586,57.5655426084995</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06634911300593,52.5159422676885,44.3760047396645 6.06666510874161,52.5161310212429,44.3756328029558 6.06666510904773,52.5161310231512,57.5656866338104 6.06634911331195,52.5159422695967,57.5660585686564 6.06634911300593,52.5159422676885,44.3760047396645</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06611237006041,52.5160900933719,44.3757652267814 6.06634911300593,52.5159422676885,44.3760047396645 6.06634911331195,52.5159422695967,57.5660585686564 6.06611237036636,52.5160900952801,57.565819057636 6.06611237006041,52.5160900933719,44.3757652267814</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06632220365507,52.5162156077898,44.3755179373547 6.06611237006041,52.5160900933719,44.3757652267814 6.06611237036636,52.5160900952801,57.565819057636 6.06632220396109,52.5162156096981,57.5655717663467 6.06632220365507,52.5162156077898,44.3755179373547</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06630616255536,52.5162253432918,44.3755022129044 6.06632220365507,52.5162156077898,44.3755179373547 6.06632220396109,52.5162156096981,57.5655717663467 6.06630616286138,52.5162253452001,57.565556040965 6.06630616255536,52.5162253432918,44.3755022129044</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06634840371996,52.5162504643378,44.3754526926205 6.06630616255536,52.5162253432918,44.3755022129044 6.06630616286138,52.5162253452001,57.565556040965 6.06634840402598,52.5162504662461,57.5655065216124 6.06634840371996,52.5162504643378,44.3754526926205</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06636433796865,52.5162404867777,44.375468865037 6.06634840371996,52.5162504643378,44.3754526926205 6.06634840402598,52.5162504662461,57.5655065216124 6.06636433827468,52.516240488686,57.5655226912349 6.06636433796865,52.5162404867777,44.375468865037</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.0664285844634,52.51627869351,44.3753935471177 6.06636433796865,52.5162404867777,44.375468865037 6.06636433827468,52.516240488686,57.5655226912349 6.06642858476945,52.5162786954183,57.5654473761097 6.0664285844634,52.51627869351,44.3753935471177</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06674538852839,52.5164661839594,44.3750237738714 6.0664285844634,52.51627869351,44.3753935471177 6.06642858476945,52.5162786954183,57.5654473761097 6.06674538883454,52.5164661858678,57.5650776010007 6.06674538852839,52.5164661839594,44.3750237738714</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06720914783232,52.5161761756369,44.3754937071353 6.06674538852839,52.5164661839594,44.3750237738714 6.06674538883454,52.5164661858678,57.5650776010007 6.06720914813861,52.5161761775451,57.5655475379899 6.06720914783232,52.5161761756369,44.3754937071353</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06701716392782,52.5160619117673,44.3757189493626 6.06720914783232,52.5161761756369,44.3754937071353 6.06720914813861,52.5161761775451,57.5655475379899 6.06701716423405,52.5160619136755,57.5657727783546 6.06701716392782,52.5160619117673,44.3757189493626</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06679001276599,52.5162039587503,44.3754887767136 6.06701716392782,52.5160619117673,44.3757189493626 6.06701716423405,52.5160619136755,57.5657727783546 6.06679001307215,52.5162039606586,57.5655426084995 6.06679001276599,52.5162039587503,44.3754887767136</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember><gml:polygonMember><gml:Polygon><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>6.06666510874161,52.5161310212429,44.3756328029558 6.06679001276599,52.5162039587503,44.3754887767136 6.06679001307215,52.5162039606586,57.5655426084995 6.06666510904773,52.5161310231512,57.5656866338104 6.06666510874161,52.5161310212429,44.3756328029558</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></gml:polygonMember></gml:MultiPolygon>"^^geo:gmlLiteral;
    geo:asWKT "MULTIPOLYGON Z (((6.06666510874161 52.5161310212429 44.3756328029558,6.06634911300593 52.5159422676885 44.3760047396645,6.06611237006041 52.5160900933719 44.3757652267814,6.06632220365507 52.5162156077898 44.3755179373547,6.06630616255536 52.5162253432918 44.3755022129044,6.06634840371996 52.5162504643378 44.3754526926205,6.06636433796865 52.5162404867777 44.375468865037,6.0664285844634 52.51627869351 44.3753935471177,6.06674538852839 52.5164661839594 44.3750237738714,6.06720914783232 52.5161761756369 44.3754937071353,6.06701716392782 52.5160619117673 44.3757189493626,6.06679001276599 52.5162039587503 44.3754887767136,6.06666510874161 52.5161310212429 44.3756328029558)),((6.06679001307215 52.5162039606586 57.5655426084995,6.06701716423405 52.5160619136755 57.5657727783546,6.06720914813861 52.5161761775451 57.5655475379899,6.06674538883454 52.5164661858678 57.5650776010007,6.06642858476945 52.5162786954183 57.5654473761097,6.06636433827468 52.516240488686 57.5655226912349,6.06634840402598 52.5162504662461 57.5655065216124,6.06630616286138 52.5162253452001 57.565556040965,6.06632220396109 52.5162156096981 57.5655717663467,6.06611237036636 52.5160900952801 57.565819057636,6.06634911331195 52.5159422695967 57.5660585686564,6.06666510904773 52.5161310231512 57.5656866338104,6.06679001307215 52.5162039606586 57.5655426084995)),((6.06634911300593 52.5159422676885 44.3760047396645,6.06666510874161 52.5161310212429 44.3756328029558,6.06666510904773 52.5161310231512 57.5656866338104,6.06634911331195 52.5159422695967 57.5660585686564,6.06634911300593 52.5159422676885 44.3760047396645)),((6.06611237006041 52.5160900933719 44.3757652267814,6.06634911300593 52.5159422676885 44.3760047396645,6.06634911331195 52.5159422695967 57.5660585686564,6.06611237036636 52.5160900952801 57.565819057636,6.06611237006041 52.5160900933719 44.3757652267814)),((6.06632220365507 52.5162156077898 44.3755179373547,6.06611237006041 52.5160900933719 44.3757652267814,6.06611237036636 52.5160900952801 57.565819057636,6.06632220396109 52.5162156096981 57.5655717663467,6.06632220365507 52.5162156077898 44.3755179373547)),((6.06630616255536 52.5162253432918 44.3755022129044,6.06632220365507 52.5162156077898 44.3755179373547,6.06632220396109 52.5162156096981 57.5655717663467,6.06630616286138 52.5162253452001 57.565556040965,6.06630616255536 52.5162253432918 44.3755022129044)),((6.06634840371996 52.5162504643378 44.3754526926205,6.06630616255536 52.5162253432918 44.3755022129044,6.06630616286138 52.5162253452001 57.565556040965,6.06634840402598 52.5162504662461 57.5655065216124,6.06634840371996 52.5162504643378 44.3754526926205)),((6.06636433796865 52.5162404867777 44.375468865037,6.06634840371996 52.5162504643378 44.3754526926205,6.06634840402598 52.5162504662461 57.5655065216124,6.06636433827468 52.516240488686 57.5655226912349,6.06636433796865 52.5162404867777 44.375468865037)),((6.0664285844634 52.51627869351 44.3753935471177,6.06636433796865 52.5162404867777 44.375468865037,6.06636433827468 52.516240488686 57.5655226912349,6.06642858476945 52.5162786954183 57.5654473761097,6.0664285844634 52.51627869351 44.3753935471177)),((6.06674538852839 52.5164661839594 44.3750237738714,6.0664285844634 52.51627869351 44.3753935471177,6.06642858476945 52.5162786954183 57.5654473761097,6.06674538883454 52.5164661858678 57.5650776010007,6.06674538852839 52.5164661839594 44.3750237738714)),((6.06720914783232 52.5161761756369 44.3754937071353,6.06674538852839 52.5164661839594 44.3750237738714,6.06674538883454 52.5164661858678 57.5650776010007,6.06720914813861 52.5161761775451 57.5655475379899,6.06720914783232 52.5161761756369 44.3754937071353)),((6.06701716392782 52.5160619117673 44.3757189493626,6.06720914783232 52.5161761756369 44.3754937071353,6.06720914813861 52.5161761775451 57.5655475379899,6.06701716423405 52.5160619136755 57.5657727783546,6.06701716392782 52.5160619117673 44.3757189493626)),((6.06679001276599 52.5162039587503 44.3754887767136,6.06701716392782 52.5160619117673 44.3757189493626,6.06701716423405 52.5160619136755 57.5657727783546,6.06679001307215 52.5162039606586 57.5655426084995,6.06679001276599 52.5162039587503 44.3754887767136)),((6.06666510874161 52.5161310212429 44.3756328029558,6.06679001276599 52.5162039587503 44.3754887767136,6.06679001307215 52.5162039606586 57.5655426084995,6.06666510904773 52.5161310231512 57.5656866338104,6.06666510874161 52.5161310212429 44.3756328029558)))"^^geo:wktLiteral;
    geo:dimension 3 ].
#+END_SRC

* Issues
** GML dimension

The attribute ~srsDimension="3"~ of tag ~gml:Envelope~ is not
recognized by GDAL.  Adding the attribute to tag ~gml:Solid~ (i.e.,
the highest partner tag for which GDAL detects the dimension setting)
fixes this issue.  It is unclear to me whether this is a limitation of
GDAL, the source GML, or my code.

The source files can be changed with the following script:

#+BEGIN_SRC sh
$ ./tools/fix-gml-dimension.sh input.gml output.gml
#+END_SRC

** XML ampersands
The GML source files sometimes contain raw ampersand characters (~&~),
which is not allowed in XML.  We can naively replace them with ~&amp;~
using the following script, but this will unnecessarily replace the
ampersand when it already is part of an ~&amp;~ entity, and it also
unnecessarily replaces the ampersand withing ~CDATA~ contexts:

#+BEGIN_SRC sh
./tools/fix-xml-ampersand.sh input.gml output.gml
#+END_SRC
